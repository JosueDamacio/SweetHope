<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sweet Hope - Crea tu presupuesto</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'pastel-pink': '#FFCCD1',
                        'pastel-orange': '#FFDBB5',
                        'sweet-orange': '#FFA500'
                    },
                    fontFamily: {
                        'poppins': ['Poppins', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style id="app-style">
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #fff6f0;
            background-image: url("/img/torta.png");
            background-position: center;
            background-size: 160px 160px;
            background-attachment: fixed;
        }
        .tituloPrincipal{
            padding-top: 10px;
            background-color: #f8f5f1c4;
        }

        .option-card {
            transition: all 0.3s ease;
            box-shadow: 0 10px 15px 0px rgba(0, 0, 0, 0.1);
        }

        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px 0px rgba(46, 24, 13, 0.562);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .checkbox-container input[type="checkbox"] {
            margin-right: 0.5rem;
            width: 1.2rem;
            height: 1.2rem;
            cursor: pointer;
        }

        .price-tag {
            margin-left: auto;
            font-weight: 500;
            color: #666;
        }

        .contact-button {
            transition: all 0.3s ease;
        }

        .contact-button:hover {
            transform: scale(1.05);
        }

        .total-section {
            background: linear-gradient(135deg, #ffd6fc, #fcfbce);
        }
    </style>
</head>
<body>
    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8 max-w-5xl">
        <header class="text-center mb-10">
            <img src="img/sh_logo.jpg" alt="Logo Sweet Hope" style="margin: 0 auto 1.5rem auto; display: block; max-width: 180px; border: 4px solid rgb(228, 200, 187)">
            <h1 class="text-5xl font-bold text-gray-800 mb-3 tituloPrincipal">Crea tu presupuesto!</h1>
            <p class="text-lg text-gray-600 tituloPrincipal">Sweet Hope - Dulces momentos para compartir</p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Tama√±o de torta -->
            <div class="option-card bg-pastel-pink rounded-lg p-6 shadow-md">
                <h2 class="text-xl font-semibold mb-4 border-b pb-2">Tama√±o de torta</h2>
                
                <!-- <div class="checkbox-container">
                    <input type="radio" id="size-individual" name="cake-size" data-price="15000" data-multiplier="1" class="cake-option cake-size">
                    <label for="size-individual">„Ö§Individual</label>
                    <span class="price-tag">$15.000</span>
                </div> -->
                
                <div class="checkbox-container">
                    <input type="radio" id="size-medium" name="cake-size" data-price="25000" data-multiplier="1.0" class="cake-option cake-size">
                    <label for="size-medium">„Ö§Mediana</label>
                    <span class="price-tag">$25.000</span>
                </div>
                
                <div class="checkbox-container">
                    <input type="radio" id="size-large" name="cake-size" data-price="35000" data-multiplier="1.8" class="cake-option cake-size">
                    <label for="size-large">„Ö§Grande</label>
                    <span class="price-tag">$35.000</span>
                </div>
                
                <div class="checkbox-container">
                    <input type="radio" id="size-2tier" name="cake-size" data-price="50000" data-multiplier="2.6" class="cake-option cake-size">
                    <label for="size-2tier">„Ö§2 pisos</label>
                    <span class="price-tag">$50.000</span>
                </div>
            </div>

                        <!-- Toppings -->
            <div class="option-card bg-pastel-orange rounded-lg p-6 shadow-md">
                <h2 class="text-xl font-semibold mb-4 border-b pb-2">Toppings</h2>
                <div id="toppings-list"></div>
            </div>

            <!-- Rellenos -->
            <div class="option-card bg-pastel-orange rounded-lg p-6 shadow-md">
                <h2 class="text-xl font-semibold mb-4 border-b pb-2">Rellenos</h2>
                <div id="fillings-list"></div>
            </div>

            <!-- Decoraciones exteriores -->
            <div class="option-card bg-pastel-pink rounded-lg p-6 shadow-md">
                <h2 class="text-xl font-semibold mb-4 border-b pb-2">Decoraciones exteriores</h2>
                <div id="decorations-list"></div>
            </div>
        </div>
        <!-- Total section -->
        <div class="total-section mt-10 p-6 rounded-lg shadow-lg">
            <div class="flex justify-between items-center mb-3">
                <h2 class="text-2xl font-bold">Total:</h2>
                <span id="total-price" class="text-3xl font-bold">$0</span>
            </div>
            <p class="text-sm text-gray-600 italic mb-6">Los pedidos deben hacerse con <span style="font-weight: bold;">m√≠nimo una semana de anticipaci√≥n</span>. Gracias por elegirnos üòä</p>
            
            <button id="contact-button" class="contact-button w-full bg-sweet-orange hover:bg-opacity-90 text-white py-3 px-6 rounded-lg text-lg font-semibold flex items-center justify-center">
                <i class="fab fa-whatsapp text-2xl mr-2"></i>
                Contactar
            </button>
        </div>
    </div>

<script id="app-script">
const PRODUCT_PRICES = {
    sizes: {
        // individual: 15000,
        medium: 25000,
        large: 35000,
        twotier: 50000
    },
    fillings: {
        dulce_de_leche: 2500,
        crema: 3000,
        mousse: 4000,
        frutilla_o_durazno: 3500,
        galletas_a_elecci√≥n: 4000,
        chocolate: 5000,
        mani: 5200,
        mantecol: 6000,
        nutella: 6500,
        Personalizado: 6500
    },
    toppings: {
        chocolate: 4500,
        frutas_a_elecci√≥n: 4000,
        oreo: 3200,
        personalizado: 5500
    },
    decorations: {
        cobertura_de_crema: 5000,
        trozos_de_caramelo: 3000,
        mazapan: 5000,
        impresiones_de_papel_arroz: 5600,
        dise√±os_con_crema: 4000,
        frutas: 2600,
        chocolates: 4800,
        galletitas: 3500,
        cobertura_de_chocolate: 6500

    }
};

function capitalize(str) {
    // Convierte snake_case o camelCase a texto legible
    return str.replace(/([A-Z])/g, ' $1')
              .replace(/^./, s => s.toUpperCase())
              .replace(/_/g, ' ');
}

function renderOptions() {
    // Rellenos
    const fillingsDiv = document.getElementById('fillings-list');
    fillingsDiv.innerHTML = '';
    Object.entries(PRODUCT_PRICES.fillings).forEach(([key, price]) => {
        fillingsDiv.innerHTML += `
            <div class="checkbox-container">
                <input type="checkbox" id="fill-${key}" data-key="${key}" class="cake-option cake-filling">
                <label for="fill-${key}">${capitalize(key)}</label>
                <span class="price-tag" id="price-fill-${key}">$${price.toLocaleString()}</span>
            </div>
        `;
    });

    // Toppings
    const toppingsDiv = document.getElementById('toppings-list');
    toppingsDiv.innerHTML = '';
    Object.entries(PRODUCT_PRICES.toppings).forEach(([key, price]) => {
        toppingsDiv.innerHTML += `
            <div class="checkbox-container">
                <input type="checkbox" id="top-${key}" data-key="${key}" class="cake-option cake-topping">
                <label for="top-${key}">${capitalize(key)}</label>
                <span class="price-tag" id="price-top-${key}">$${price.toLocaleString()}</span>
            </div>
        `;
    });

    // Decoraciones
    const decorationsDiv = document.getElementById('decorations-list');
    decorationsDiv.innerHTML = '';
    Object.entries(PRODUCT_PRICES.decorations).forEach(([key, price]) => {
        decorationsDiv.innerHTML += `
            <div class="checkbox-container">
                <input type="checkbox" id="dec-${key}" data-key="${key}" class="cake-option cake-decoration">
                <label for="dec-${key}">${capitalize(key)}</label>
                <span class="price-tag" id="price-dec-${key}">$${price.toLocaleString()}</span>
            </div>
        `;
    });
}

document.addEventListener('DOMContentLoaded', function() {
    renderOptions();

    function getMultiplier() {
        const selectedSize = document.querySelector('.cake-size:checked');
        if (!selectedSize) return 1;
        return parseFloat(selectedSize.getAttribute('data-multiplier')) || 1;
    }

    function updateOptionPrices() {
        const multiplier = getMultiplier();

        // Rellenos
        Object.entries(PRODUCT_PRICES.fillings).forEach(([key, base]) => {
            let price = base;
            if (multiplier !== 1) price = Math.round(base * multiplier);
            const priceTag = document.getElementById('price-fill-' + key);
            if (priceTag) priceTag.textContent = `$${price.toLocaleString()}`;
        });

        // Toppings
        Object.entries(PRODUCT_PRICES.toppings).forEach(([key, base]) => {
            let price = base;
            if (multiplier !== 1) price = Math.round(base * multiplier);
            const priceTag = document.getElementById('price-top-' + key);
            if (priceTag) priceTag.textContent = `$${price.toLocaleString()}`;
        });

        // Decoraciones
        Object.entries(PRODUCT_PRICES.decorations).forEach(([key, base]) => {
            let price = base;
            if (multiplier !== 1) price = Math.round(base * multiplier);
            const priceTag = document.getElementById('price-dec-' + key);
            if (priceTag) priceTag.textContent = `$${price.toLocaleString()}`;
        });
    }

    function getPriceFromSpan(input, type) {
        // Obtiene el valor mostrado en el span de precio asociado al input
        const key = input.getAttribute('data-key');
        const priceTag = document.getElementById(`price-${type}-${key}`);
        if (!priceTag) return 0;
        return parseInt(priceTag.textContent.replace(/\D/g, '')) || 0;
    }

    function calculateTotal() {
        const selectedSize = document.querySelector('.cake-size:checked');
        let total = 0;

        // Base price
        if (selectedSize) {
            total += parseInt(selectedSize.getAttribute('data-price')) || 0;
        }

        // Rellenos
        document.querySelectorAll('.cake-filling:checked').forEach(input => {
            total += getPriceFromSpan(input, 'fill');
        });

        // Toppings
        document.querySelectorAll('.cake-topping:checked').forEach(input => {
            total += getPriceFromSpan(input, 'top');
        });

        // Decoraciones
        document.querySelectorAll('.cake-decoration:checked').forEach(input => {
            total += getPriceFromSpan(input, 'dec');
        });

        document.getElementById('total-price').textContent = `$${total.toLocaleString()}`;
    }

    // Listeners para actualizar precios y total
    document.querySelectorAll('.cake-size').forEach(option => {
        option.addEventListener('change', () => {
            updateOptionPrices();
            calculateTotal();
        });
    });

    // Delegaci√≥n de eventos para los inputs generados din√°micamente
    document.getElementById('fillings-list').addEventListener('change', calculateTotal);
    document.getElementById('toppings-list').addEventListener('change', calculateTotal);
    document.getElementById('decorations-list').addEventListener('change', calculateTotal);

    // Bot√≥n WhatsApp
    document.getElementById('contact-button').addEventListener('click', function() {
    const selectedSize = document.querySelector('.cake-size:checked');
    const fillings = Array.from(document.querySelectorAll('.cake-filling:checked'));
    if (!selectedSize) {
        Swal.fire({
            icon: 'warning',
            title: 'Selecciona un tama√±o',
            text: 'Por favor, selecciona un tama√±o de torta.',
            confirmButtonColor: '#FFA500'
        });
        return;
    }
    if (fillings.length === 0) {
        Swal.fire({
            icon: 'warning',
            title: 'Selecciona al menos un relleno',
            text: 'Por favor, selecciona al menos un relleno.',
            confirmButtonColor: '#FFA500'
        });
        return;
    }

    const sizeName = selectedSize ? selectedSize.nextElementSibling.textContent : '';
    const fillingsNames = fillings.map(f => f.nextElementSibling.textContent);
    const toppings = Array.from(document.querySelectorAll('.cake-topping:checked')).map(t => t.nextElementSibling.textContent);
    const decorations = Array.from(document.querySelectorAll('.cake-decoration:checked')).map(d => d.nextElementSibling.textContent);
    const totalPrice = document.getElementById('total-price').textContent;

    let message = "Hola, buenas tardes, me gustar√≠a una torta con lo siguiente:\n";
    if (sizeName) message += `Tama√±o: ${sizeName}\n`;
    if (fillingsNames.length) message += `Rellenos: ${fillingsNames.join(', ')}\n`;
    if (toppings.length) message += `Toppings: ${toppings.join(', ')}\n`;
    if (decorations.length) message += `Decoraciones: ${decorations.join(', ')}\n`;
    message += `Total aproximado: ${totalPrice}`;

    const phone = "5491123234612"; // Cambia aqu√≠ tu n√∫mero
    const whatsappUrl = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, '_blank');
});

    // Preselecciona individual y actualiza precios al cargar
    const individualSize = document.getElementById('size-individual');
    if (individualSize) {
        individualSize.checked = true;
        updateOptionPrices();
        calculateTotal();
    }
    // Tambi√©n actualiza precios al cargar
    updateOptionPrices();
});
</script>
</body>
</html>